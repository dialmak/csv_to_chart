<!DOCTYPE html>
<html lang="uk" >
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      <meta name="description" content="Вибір файла для побудови графіка" />
      <meta name="author" content="Ostapchuk Viktor" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Графік ІПКЗ</title>
      <link rel="icon" href="./favicon.ico" type="image/x-icon">
      <link rel="stylesheet" type="text/css" href="./style.css">
       
      <script src="./highstock.js"></script>
      <script src="./data.js"></script>
      <script src="./no-data-to-display.js"></script>
      <script src="./exporting.js"></script>
      <script src="./offline-exporting.js"></script>
      <script src="./export-data.js"></script>
      <script src="./standalone.js"></script>
   </head>
   <body>
      <noscript>
         <style type="text/css">
            #main-content {
            display: none;
            }
         </style>
         <div style="text-align: center">
         <h3>Javascript вимкнено у вашому веб-браузері. <br>Для нормальної роботи необхідно увімкнути javascript. </h3>
         <p>Допомога : <strong>
            <a target="_blank" href="./noscript"> як включити javascript в браузері</a>
            </strong>
         </p>
         </div>
      </noscript>
      <div id="main-content" style="text-align: center">
         <div  id="label_input">
            <p>Вибір CSV файлу для побудови графіка
               <br>
               <span id="help">
               Допомога :
               <a target="_blank" href="./help/index.html"> довідка по побудові графіка з реєстратора </a>
               <br>
               Приклад :
               <a href="./file/proba.csv" download=""> завантажити файл</a>
               <span>
            </p>
            <input type="file" id="file-uploader" class="visually-hidden" accept=".csv" />     
            <label for="file-uploader" class="custom-file-upload">Виберіть файл...</label>
            <div id="feedback"></div>
         </div>
         <div id="container"></div>
      </div>
      <script src="./csv.js"></script>
   </body>
   
   <script>
      const fileUploader = document.getElementById('file-uploader');
      const feedback = document.getElementById('feedback');
  
      fileUploader.addEventListener('change', (event) => {
          const file = event.target.files[0];
          console.log('file', file);
  
          const size = file.size;
          console.log('size', size);
          let msg = '';
  
          if (size > 1024 * 1024) {
              msg = `<span style="color:red;">The allowed file size is 1MB. The file you are trying to upload is of ${returnFileSize(size)}</span>`;
          } else {
              msg = `<span style="color:green;"> A ${returnFileSize(size)} file has been uploaded successfully. </span>`;
          }
          feedback.innerHTML = msg;
      });
  
      function returnFileSize(number) {
          if (number < 1024) {
              return number + 'bytes';
          } else if (number >= 1024 && number < 1048576) {
              return (number / 1024).toFixed(2) + 'KB';
          } else if (number >= 1048576) {
              return (number / 1048576).toFixed(2) + 'MB';
          }
      }
  </script>


</html>
